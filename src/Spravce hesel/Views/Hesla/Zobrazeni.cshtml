@model List<Heslo>
@{
    ViewData["Title"] = "Moje hesla";
    List<SdileneHeslo>? sdileneHesla = (List<SdileneHeslo>?)ViewData["sdilene_hesla"];
    List<SdileneHeslo>? oznameni = (List<SdileneHeslo>?)ViewData["oznameni"];
}

<article>
    <h2>Moje hesla</h2>
    <p class="center">
        <button type="button" class="icon-plus" onclick="window.location.href = '/Hesla/Pridat'">Přidat heslo</button>
        @if (oznameni != null && oznameni.Count == 0)
        {
            <button type="button" class="icon-bell" onclick="zobrazitPOPup('oznameni')">Oznámení</button>
        }
        else
        {
            <button type="button" class="icon-bell upozorneniOznameni" onclick="zobrazitPOPup('oznameni')">Oznámení (@oznameni.Count)</button>
        }
    </p>

    @{
        foreach (Heslo heslo in Model)
        {
            <div class="heslo_div">
                <div class="sluzba">
                    <a title="Zobrazit heslo" href="JavaScript:vyzadatHeslo(@heslo.ID)">
                        @if (heslo.Sluzba == null || heslo.Sluzba.Trim() == "")
                        {
                            <i>Neznámá služba</i>
                        }
                        else
                        {
                            @heslo.Sluzba
                        }
                    </a>
                    <span>
                        <a class="icon-share" title="Sdílet heslo" href="/Hesla/Sdileni/@heslo.ID"></a>
                        <a class="icon-edit" title="Upravit heslo" href="/Hesla/Upravit/@heslo.ID"></a>
                        <a class="icon-bin" title="Odstranit heslo" href="JavaScript:vyzadatOdstraneni(@heslo.ID)"></a>
                    </span>
                </div>
                <div class="jmeno">
                    @if (heslo.Jmeno == null || heslo.Jmeno.Trim() == "")
                    {
                        <i>Neznámé jméno</i>
                    }
                    else
                    {
                        @heslo.Jmeno
                    }
                </div>
                <div class="heslo">••••••••</div>
            </div>
        }
        foreach (SdileneHeslo h in sdileneHesla)
        {
            <div class="heslo_div sdileneheslo">
                <div class="sluzba">
                    <a title="Zobrazit heslo" href="JavaScript:vyzadatHeslo(@h.Id, 'sdilene')">
                        @if (h.Sluzba == null || h.Sluzba.Trim() == "")
                        {
                            <i>Neznámá služba</i>
                        }
                        else
                        {
                            @h.Sluzba
                        }
                    </a>
                    <span>
                        <a class="icon-bin" title="Odstranit heslo" href="JavaScript:vyzadatOdstraneni(@h.Id, 'sdilene')"></a>
                    </span>
                </div>
                <div class="jmeno">
                    @if (h.Jmeno == null || h.Jmeno.Trim() == "")
                    {
                        <i>Neznámé jméno</i>
                    }
                    else
                    {
                        @h.Jmeno
                    }
                </div>
                <div class="heslo">••••••••</div>
            </div>
        }

        if (Model.Count == 0 && sdileneHesla != null & sdileneHesla.Count == 0)
        {
            <p>Zatím nemáte přidané žádné heslo</p>
        }
        else
        {
            <partial name="_DetailHesla" />
            <partial name="_OdstranitHeslo" />
        }
    }

    <partial name="_Oznameni" />
</article>

